<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¬ì¸ì› ë°°í„°ë¦¬ íŒ© ì—´ ì‹œë®¬ë ˆì´í„°</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8f9fa;
            color: #212529;
            line-height: 1.7;
        }
        .container {
            max-width: 960px;
            margin: 20px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        header {
            text-align: center;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        header h1 {
            font-size: 2.5em;
            color: #0056b3;
            margin: 0;
        }
        header p {
            font-size: 1.1em;
            color: #6c757d;
        }
        section {
            margin-bottom: 40px;
        }
        h2 {
            font-size: 2em;
            color: #0056b3;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .infographic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            text-align: center;
        }
        .infographic-step {
            background-color: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .infographic-step h3 {
            font-size: 1.4em;
            color: #1976d2;
            margin-top: 0;
        }
        .spec-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .spec-table th, .spec-table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        .spec-table th {
            background-color: #e3f2fd;
            font-weight: 700;
        }
        .formula-box {
            background-color: #fff9c4;
            border-left: 5px solid #fbc02d;
            padding: 20px;
            margin-top: 20px;
            border-radius: 5px;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        .simulator {
            background-color: #f1f8e9;
            border: 1px solid #dcedc8;
            padding: 25px;
            border-radius: 8px;
        }
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .input-group { display: flex; flex-direction: column; }
        label { font-weight: 700; color: #388e3c; margin-bottom: 5px; }
        input[type="number"] { padding: 10px; border: 1px solid #a5d6a7; border-radius: 4px; font-size: 1em; }
        button {
            grid-column: 1 / -1;
            background-color: #4caf50;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        button:hover { background-color: #45a049; }
        #results-output { display: none; margin-top: 20px; }
        .results-summary { font-size: 1.2em; font-weight: bold; }
        b { color: #c62828; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>ğŸ”‹ ì˜¬ì¸ì›(All-in-One) ë°°í„°ë¦¬ íŒ© ì—´ ì‹œë®¬ë ˆì´í„°</h1>
            <p>ë°°í„°ë¦¬ íŒ©ì˜ ì—´ì  ê±°ë™ì— ëŒ€í•œ ê°œë… ì´í•´ë¶€í„° ì‹¤ì œ ê³„ì‚°ê¹Œì§€, ëª¨ë“  ê²ƒì„ í•œ í˜ì´ì§€ì—ì„œ ê²½í—˜í•˜ì„¸ìš”.</p>
        </header>

        <section id="infographic">
            <h2>ğŸ“Š ì¸í¬ê·¸ë˜í”½: ì—´ ìƒìŠ¹ì˜ 3ë‹¨ê³„</h2>
            <div class="infographic-grid">
                <div class="infographic-step">
                    <h3>[Phase 1] ì¼ë°˜ ë°œì—´ êµ¬ê°„</h3>
                    <p>ë°°í„°ë¦¬ ì‘ë™ ì‹œ ë°œìƒí•˜ëŠ” ì—´ë¡œ ì¸í•´ ì´ˆê¸° ì˜¨ë„ì—ì„œ PCM ë…¹ëŠ”ì ê¹Œì§€ ì˜¨ë„ê°€ ê¾¸ì¤€íˆ ìƒìŠ¹í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="infographic-step">
                    <h3>[Phase 2] PCM ì—´ í¡ìˆ˜ êµ¬ê°„</h3>
                    <p>PCMì´ ë…¹ìœ¼ë©´ì„œ ì˜¨ë„ ìƒìŠ¹ ì—†ì´ ì—´ì„ í¡ìˆ˜í•˜ëŠ” <b>'ê³¨ë“ íƒ€ì„'</b>ì…ë‹ˆë‹¤. ì´ ì•ˆì „ ë²„í¼ê°€ ì‹œìŠ¤í…œì„ ë³´í˜¸í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="infographic-step">
                    <h3>[Phase 3] ìœ„í—˜ êµ¬ê°„</h3>
                    <p>PCMì´ ëª¨ë‘ ë…¹ì€ í›„, ë‹¤ì‹œ ì˜¨ë„ê°€ ìƒìŠ¹í•˜ì—¬ ìµœì¢… í•œê³„ ì˜¨ë„ì— ë„ë‹¬í•´ê°€ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.</p>
                </div>
            </div>
        </section>

        <section id="material-spec">
            <h2>ğŸ”¬ í•µì‹¬ ì†Œì¬ ë¶„ì„: PCM í¬íŒ…ì¬ë€?</h2>
            <p>PCM(ìƒë³€í™” ë¬¼ì§ˆ) í¬íŒ…ì¬ëŠ” íŠ¹ì • ì˜¨ë„ì—ì„œ ìƒíƒœê°€ ë³€í•˜ë©°(ê³ ì²´â†’ì•¡ì²´) ì£¼ë³€ì˜ ì—´ì„ ëŒ€ëŸ‰ìœ¼ë¡œ í¡ìˆ˜í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ì†Œì¬ì…ë‹ˆë‹¤. ë§ˆì¹˜ ìŒë£Œ ì† ì–¼ìŒì´ ë…¹ìœ¼ë©° ì‹œì›í•¨ì„ ìœ ì§€í•˜ë“¯, ë°°í„°ë¦¬ íŒ©ì˜ ì˜¨ë„ê°€ ê¸‰ê²©íˆ ì˜¤ë¥´ëŠ” ê²ƒì„ ë§‰ì•„ì¤ë‹ˆë‹¤.</p>
            <table class="spec-table">
                <caption>ëŒ€í‘œ ì œí’ˆ: Henkel LOCTITE TCP 4000PM</caption>
                <thead>
                    <tr>
                        <th>íŠ¹ì„± (Property)</th>
                        <th>ê°’ (Value)</th>
                        <th>ì—­í•  ë° ì¤‘ìš”ì„±</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><b>ìƒë³€í™” ì˜¨ë„</b></td>
                        <td>ì•½ 50Â°C</td>
                        <td>ì—´ í¡ìˆ˜ ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ëŠ” ì˜¨ë„ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.</td>
                    </tr>
                    <tr>
                        <td><b>ì ì—´ ìš©ëŸ‰</b></td>
                        <td>155 J/g</td>
                        <td>í•µì‹¬ì ì¸ 'ì—´ í¡ìˆ˜ ëŠ¥ë ¥'ì…ë‹ˆë‹¤. ê°’ì´ í´ìˆ˜ë¡ ë” ë§ì€ ì—´ì„ í¡ìˆ˜í•©ë‹ˆë‹¤.</td>
                    </tr>
                    <tr>
                        <td><b>ì—´ì „ë„ë„</b></td>
                        <td>1.6 W/mÂ·K</td>
                        <td>í‰ìƒì‹œ ì—´ì„ ì™¸ë¶€ë¡œ ì˜ ë°©ì¶œí•˜ëŠ” ëŠ¥ë ¥ì…ë‹ˆë‹¤. ë†’ì„ìˆ˜ë¡ ëƒ‰ê°ì— ìœ ë¦¬í•©ë‹ˆë‹¤.</td>
                    </tr>
                    <tr>
                        <td><b>ë°€ë„</b></td>
                        <td>2.5 g/cmÂ³</td>
                        <td>ë¬´ê²Œ ë° ì´ ì—´ í¡ìˆ˜ëŸ‰ ê³„ì‚°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</td>
                    </tr>
                    <tr>
                        <td><b>ì „ê¸° ì ˆì—°ì„±</b></td>
                        <td>> 15 kV/mm</td>
                        <td>í¬íŒ…ì¬ì˜ ê¸°ë³¸ ê¸°ëŠ¥ìœ¼ë¡œ, ì „ê¸°ì  í•©ì„ ì„ ë°©ì§€í•©ë‹ˆë‹¤.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="calculation-logic">
            <h2>âˆ‘ ê³„ì‚° ì›ë¦¬: ì—´ì—­í•™ ê³µì‹ ì´í•´í•˜ê¸°</h2>
            <p>ì‹œë®¬ë ˆì´í„°ëŠ” ì•„ë˜ì˜ ì—´ì—­í•™ ì›ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê° ë‹¨ê³„ì˜ ì‹œê°„ì„ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
            <div class="formula-box">
                <p><b>[Phase 1 & 3] ì‹œê°„ = í•„ìš”í•œ ì—ë„ˆì§€(Q) / ìˆœìˆ˜ ë°œì—´ëŸ‰(P_net)</b></p>
                <ul>
                    <li>í•„ìš”í•œ ì—ë„ˆì§€ (<b>Q</b>) = ì‹œìŠ¤í…œ ì´ ì—´ìš©ëŸ‰ (<b>C_th</b>) Ã— ì˜¨ë„ ë³€í™” (<b>Î”T</b>)</li>
                    <li>ì‹œìŠ¤í…œ ì´ ì—´ìš©ëŸ‰ (<b>C_th</b>) = (ì…€ ì§ˆëŸ‰Ã—ë¹„ì—´) + (í¬íŒ…ì¬ ì§ˆëŸ‰Ã—ë¹„ì—´) + (ì¼€ì´ìŠ¤ ì§ˆëŸ‰Ã—ë¹„ì—´)</li>
                    <li>ìˆœìˆ˜ ë°œì—´ëŸ‰ (<b>P_net</b>) = ì´ ë°œì—´ëŸ‰ (<b>P_in</b>) - ì™¸ë¶€ ë°©ì—´ëŸ‰ (<b>P_out</b>)</li>
                </ul>
                <hr>
                <p><b>[Phase 2] ì‹œê°„ = PCM ì´ í¡ìˆ˜ ì—´ëŸ‰(Q_latent) / ìˆœìˆ˜ ë°œì—´ëŸ‰(P_net)</b></p>
                <ul>
                    <li>PCM ì´ í¡ìˆ˜ ì—´ëŸ‰ (<b>Q_latent</b>) = í¬íŒ…ì¬ ì§ˆëŸ‰ (<b>m_potting</b>) Ã— ì ì—´ ìš©ëŸ‰ (<b>L_pcm</b>)</li>
                </ul>
            </div>
        </section>

        <section id="simulator">
            <h2>âš™ï¸ ì¸í„°ë™í‹°ë¸Œ ì‹œë®¬ë ˆì´í„°</h2>
            <div class="simulator">
                <div class="input-grid">
                    <div class="input-group">
                        <label for="cell_count">ì…€ ê°œìˆ˜ (ì§ìˆ˜)</label>
                        <input type="number" id="cell_count" value="8" step="2">
                    </div>
                    <div class="input-group">
                        <label for="discharge_current_a">ì…€ ë‹¹ ë°©ì „ ì „ë¥˜ (A)</label>
                        <input type="number" id="discharge_current_a" value="40.0" step="1">
                    </div>
                    <div class="input-group">
                        <label for="ambient_temp_c">ì™¸ë¶€ ê³µê¸° ì˜¨ë„ (Â°C)</label>
                        <input type="number" id="ambient_temp_c" value="40.0" step="1">
                    </div>
                    <div class="input-group">
                        <label for="initial_temp_c">ë°°í„°ë¦¬ ì´ˆê¸° ì˜¨ë„ (Â°C)</label>
                        <input type="number" id="initial_temp_c" value="30.0" step="1">
                    </div>
                    <div class="input-group">
                        <label for="pcm_melt_temp_c">PCM ë…¹ëŠ”ì  (Â°C)</label>
                        <input type="number" id="pcm_melt_temp_c" value="50.0" step="1">
                    </div>
                    <div class="input-group">
                        <label for="limit_temp_c">ìµœì¢… ì œí•œ ì˜¨ë„ (Â°C)</label>
                        <input type="number" id="limit_temp_c" value="70.0" step="1">
                    </div>
                    <button onclick="calculateThermalPerformance()">ê²°ê³¼ ê³„ì‚°</button>
                </div>
                <div id="results-output"></div>
            </div>
        </section>

    </div>

    <script>
        function calculateThermalPerformance() {
            // --- ë¬¼ë¦¬ì  ìƒìˆ˜ ì •ì˜ ---
            const C = {
                CELL_DIAMETER_M: 0.021, CELL_HEIGHT_M: 0.070, CELL_MASS_KG: 0.068,
                CELL_INTERNAL_RESISTANCE_OHM: 0.005, SPECIFIC_HEAT_CELL_J_KGK: 900,
                DENSITY_POTTING_KG_M3: 2500, SPECIFIC_HEAT_POTTING_J_KGK: 1200,
                LATENT_HEAT_POTTING_J_KG: 155000, CASE_THICKNESS_M: 0.002,
                DENSITY_ALUMINUM_KG_M3: 2700, SPECIFIC_HEAT_ALUMINUM_J_KGK: 900,
                HEAT_TRANSFER_COEFFICIENT_W_M2K: 10.0
            };

            // 1. HTMLì—ì„œ ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            const cell_count = parseInt(document.getElementById('cell_count').value);
            const discharge_current_a = parseFloat(document.getElementById('discharge_current_a').value);
            const ambient_temp_c = parseFloat(document.getElementById('ambient_temp_c').value);
            const initial_temp_c = parseFloat(document.getElementById('initial_temp_c').value);
            const pcm_melt_temp_c = parseFloat(document.getElementById('pcm_melt_temp_c').value);
            const limit_temp_c = parseFloat(document.getElementById('limit_temp_c').value);

            if (cell_count % 2 !== 0 || cell_count <= 0) {
                alert("ì…€ ê°œìˆ˜ëŠ” 0ë³´ë‹¤ í° ì§ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.");
                return;
            }

            // 2. ì§€ì˜¤ë©”íŠ¸ë¦¬ ë° ì§ˆëŸ‰ ê³„ì‚°
            const rows = 2;
            const cols = cell_count / 2;
            const pack_width_m = cols * C.CELL_DIAMETER_M;
            const pack_depth_m = rows * C.CELL_DIAMETER_M;
            const pack_height_m = C.CELL_HEIGHT_M;
            
            const volume_total_m3 = pack_width_m * pack_depth_m * pack_height_m;
            const volume_cell_one_m3 = Math.PI * Math.pow(C.CELL_DIAMETER_M / 2, 2) * C.CELL_HEIGHT_M;
            const volume_cells_total_m3 = volume_cell_one_m3 * cell_count;
            const volume_potting_m3 = volume_total_m3 - volume_cells_total_m3;

            const mass_cells_kg = C.CELL_MASS_KG * cell_count;
            const mass_potting_kg = volume_potting_m3 * C.DENSITY_POTTING_KG_M3;
            const case_surface_area_m2 = 2 * (pack_width_m * pack_depth_m + pack_width_m * pack_height_m + pack_depth_m * pack_height_m);
            const volume_case_m3 = case_surface_area_m2 * C.CASE_THICKNESS_M;
            const mass_case_kg = volume_case_m3 * C.DENSITY_ALUMINUM_KG_M3;

            // 3. ì´ ë°œì—´ëŸ‰ ë° ì—´ìš©ëŸ‰ ê³„ì‚°
            const heat_generation_per_cell_w = Math.pow(discharge_current_a, 2) * C.CELL_INTERNAL_RESISTANCE_OHM;
            const heat_generation_total_w = heat_generation_per_cell_w * cell_count;
            
            const heat_capacity_cells_j_k = mass_cells_kg * C.SPECIFIC_HEAT_CELL_J_KGK;
            const heat_capacity_potting_j_k = mass_potting_kg * C.SPECIFIC_HEAT_POTTING_J_KGK;
            const heat_capacity_case_j_k = mass_case_kg * C.SPECIFIC_HEAT_ALUMINUM_J_KGK;
            const total_heat_capacity_j_k = heat_capacity_cells_j_k + heat_capacity_potting_j_k + heat_capacity_case_j_k;

            // 4. 3ë‹¨ê³„ ì‹œê°„ ê³„ì‚°
            let t1 = 0, t2 = 0, t3 = 0;

            // Phase 1
            if (pcm_melt_temp_c > initial_temp_c) {
                const delta_t1 = pcm_melt_temp_c - initial_temp_c;
                const energy_q1 = total_heat_capacity_j_k * delta_t1;
                const avg_temp_t1 = (initial_temp_c + pcm_melt_temp_c) / 2;
                const p_out1 = C.HEAT_TRANSFER_COEFFICIENT_W_M2K * case_surface_area_m2 * (avg_temp_t1 - ambient_temp_c);
                const p_net1 = heat_generation_total_w - Math.max(0, p_out1);
                if (p_net1 > 0) t1 = energy_q1 / p_net1; else t1 = Infinity;
            }

            // Phase 2
            const energy_q2 = mass_potting_kg * C.LATENT_HEAT_POTTING_J_KG;
            const p_out2 = C.HEAT_TRANSFER_COEFFICIENT_W_M2K * case_surface_area_m2 * (pcm_melt_temp_c - ambient_temp_c);
            const p_net2 = heat_generation_total_w - Math.max(0, p_out2);
            if (p_net2 > 0) t2 = energy_q2 / p_net2; else t2 = Infinity;

            // Phase 3
            if (limit_temp_c > pcm_melt_temp_c) {
                const delta_t3 = limit_temp_c - pcm_melt_temp_c;
                const energy_q3 = total_heat_capacity_j_k * delta_t3;
                const avg_temp_t3 = (pcm_melt_temp_c + limit_temp_c) / 2;
                const p_out3 = C.HEAT_TRANSFER_COEFFICIENT_W_M2K * case_surface_area_m2 * (avg_temp_t3 - ambient_temp_c);
                const p_net3 = heat_generation_total_w - Math.max(0, p_out3);
                if (p_net3 > 0) t3 = energy_q3 / p_net3; else t3 = Infinity;
            }
            
            // 5. ê²°ê³¼ í‘œì‹œ
            const resultsDiv = document.getElementById('results-output');
            const formatTime = (seconds) => {
                if (seconds === Infinity) return "ë¬´í•œëŒ€ (ì˜¨ë„ê°€ ì•ˆì •ë¨)";
                return `<b>${seconds.toFixed(1)}ì´ˆ</b> (${(seconds / 60).toFixed(1)}ë¶„)`;
            };
            
            const total_safe_time = t1 === Infinity ? Infinity : t1 + t2;
            const total_limit_time = total_safe_time === Infinity ? Infinity : total_safe_time + t3;

            let insight_text = "";
            const final_dissipation = C.HEAT_TRANSFER_COEFFICIENT_W_M2K * case_surface_area_m2 * (limit_temp_c - ambient_temp_c);
            if (heat_generation_total_w < final_dissipation) {
                insight_text = "ì´ ë°œì—´ëŸ‰ì´ ìì—° ë°©ì—´ëŸ‰ë³´ë‹¤ ì ì–´, ì˜¨ë„ê°€ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë  ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ì‹œìŠ¤í…œì´ ê³¼ì—´ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
            } else {
                insight_text = "ì´ ë°œì—´ëŸ‰ì´ ìì—° ë°©ì—´ëŸ‰ë³´ë‹¤ ë§ìŠµë‹ˆë‹¤. ë³„ë„ì˜ ëŠ¥ë™ ëƒ‰ê° ì‹œìŠ¤í…œ(íŒ¬, ì•¡ì²´ ëƒ‰ê° ë“±)ì´ ì—†ë‹¤ë©´ ë°°í„°ë¦¬ íŒ©ì˜ ì˜¨ë„ëŠ” ê²°êµ­ ê³„ì† ìƒìŠ¹í•˜ê²Œ ë©ë‹ˆë‹¤.";
            }

            resultsDiv.innerHTML = `
                <hr>
                <h2>ğŸ“Š ê³„ì‚° ê²°ê³¼</h2>
                <p><strong>[Phase 1]</strong> PCM ë…¹ëŠ”ì (${pcm_melt_temp_c}Â°C) ë„ë‹¬ ì‹œê°„: ${formatTime(t1)}</p>
                <p><strong>[Phase 2]</strong> PCM ì—´ í¡ìˆ˜(ë²„í¼) ì‹œê°„: ${formatTime(t2)}</p>
                <p><strong>[Phase 3]</strong> ìµœì¢… í•œê³„(${limit_temp_c}Â°C) ë„ë‹¬ ì¶”ê°€ ì‹œê°„: ${formatTime(t3)}</p>
                <hr>
                <p class="results-summary">âœ… ì´ ì•ˆì „ ì‹œê°„ (PCM ì†Œì§„ê¹Œì§€): ${formatTime(total_safe_time)}</p>
                <p class="results-summary">âš ï¸ ìœ„í—˜ ë„ë‹¬ ì‹œê°„ (ìµœì¢… í•œê³„ê¹Œì§€): ${formatTime(total_limit_time)}</p>
                <div class="insight">
                    <strong>ğŸ’¡ ì—”ì§€ë‹ˆì–´ë§ ì¸ì‚¬ì´íŠ¸:</strong> 
                    <p>${insight_text}</p>
                </div>
            `;
            resultsDiv.style.display = 'block';
        }
    </script>
</body>
</html>
