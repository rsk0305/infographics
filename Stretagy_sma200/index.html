<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë™ì  ë¦¬ë°¸ëŸ°ì‹±ì„ ê²°í•©í•œ 200ì¼ ì´ë™í‰ê·  ëŒíŒŒ ì „ëµ ì‹œê°í™”</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f4f8;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .flow-box {
            border: 2px solid #369EFF;
            background-color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s;
        }
        .flow-box:hover {
            transform: translateY(-5px);
        }
        .flow-decision {
            border: 2px solid #0065D2;
            background-color: #EBF5FF;
        }
        .flow-action {
            border: 2px solid #004AAD;
            background-color: #FFFFFF;
        }
        .flow-arrow {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            color: #0065D2;
            margin: 0.5rem 0;
        }
        .flow-line {
            width: 2px;
            background-color: #0065D2;
            margin: 0 auto;
        }
        .kpi-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            text-align: center;
        }
        .kpi-title {
            font-size: 1.125rem;
            color: #004AAD;
            font-weight: bold;
        }
        .kpi-value {
            font-size: 2.25rem;
            color: #0065D2;
            font-weight: bold;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body class="bg-slate-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#004AAD] mb-2">200ì¼ ì´ë™í‰ê·  ëŒíŒŒ ì „ëµ ë¶„ì„</h1>
            <p class="text-lg text-gray-600">ë™ì  ë¦¬ë°¸ëŸ°ì‹±ì„ ê²°í•©í•œ ì•Œê³ ë¦¬ì¦˜ íŠ¸ë ˆì´ë”© ë¡œì§ ì‹œê°í™”</p>
        </header>

        <section id="introduction" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#004AAD] mb-8">ì „ëµì˜ í•µì‹¬ êµ¬ì„± ìš”ì†Œ</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="kpi-card">
                    <div class="kpi-title">ğŸ“ˆ ì‹ í˜¸ ìƒì„±ê¸° (The Signal)</div>
                    <div class="kpi-value">QQQ ETF</div>
                    <p class="mt-2 text-gray-600">QQQì˜ ê°€ê²©ê³¼ 200ì¼ ì´ë™í‰ê· ì„ ì„ ë¹„êµí•˜ì—¬ ì‹œì¥ì˜ ì¥ê¸° ì¶”ì„¸ë¥¼ íŒë‹¨í•˜ê³ , 'ë§¤ìˆ˜' ë˜ëŠ” 'ë§¤ë„' ì‹ í˜¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ìì‚°ì— ì§ì ‘ íˆ¬ìí•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.</p>
                </div>
                <div class="kpi-card">
                    <div class="kpi-title">ğŸš€ íˆ¬ì ìˆ˜ë‹¨ (The Vehicle)</div>
                    <div class="kpi-value">TQQQ ETF</div>
                    <p class="mt-2 text-gray-600">ìƒìŠ¹ ì¶”ì„¸ íŒë‹¨ ì‹œ, ìˆ˜ìµ ê·¹ëŒ€í™”ë¥¼ ìœ„í•´ 3ë°° ë ˆë²„ë¦¬ì§€ ETFì¸ TQQQì— íˆ¬ìí•©ë‹ˆë‹¤. ì´ëŠ” ì „ëµì˜ ê³ ìœ„í—˜-ê³ ìˆ˜ìµ íŠ¹ì„±ì„ ê²°ì •í•©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </section>

        <section id="flowchart" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#004AAD] mb-8">ì¼ì¼ ì˜ì‚¬ê²°ì • ìˆœì„œë„</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-10">
                ì•Œê³ ë¦¬ì¦˜ì€ ë§¤ì¼ ì•„ë˜ì˜ ìˆœì„œë„ë¥¼ ë”°ë¼ í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœë¥¼ ì ê²€í•˜ê³ , ì‹œì¥ ì§„ì…, ì´íƒˆ, ë˜ëŠ” í¬ì§€ì…˜ ìœ ì§€ ë° ë¦¬ë°¸ëŸ°ì‹±ì„ ê²°ì •í•©ë‹ˆë‹¤. ëª¨ë“  ê²°ì •ì€ QQQ ê°€ê²©ê³¼ 200ì¼ ì´ë™í‰ê· ì„ ì˜ ê´€ê³„ì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤.
            </p>
            <div class="max-w-4xl mx-auto">
                <div class="flow-box flow-decision">
                    <span class="font-bold">1. í¬íŠ¸í´ë¦¬ì˜¤ê°€ í˜„ì¬ ì‹œì¥ì— ì§„ì…í•œ ìƒíƒœì¸ê°€? (`in_market`)</span>
                </div>
                <div class="grid grid-cols-2 gap-4 mt-4">
                    <div class="text-center font-bold text-red-600">ì•„ë‹ˆì˜¤ (ìœ„í—˜ íšŒí”¼ ìƒíƒœ)</div>
                    <div class="text-center font-bold text-green-600">ì˜ˆ (ìœ„í—˜ ì„ í˜¸ ìƒíƒœ)</div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div class="flow-arrow">â†“</div>
                    <div class="flow-arrow">â†“</div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div class="flow-box flow-decision">
                        <span class="font-bold">2a. QQQ ê°€ê²© > 200ì¼ ì´ë™í‰ê· ì„ ì¸ê°€?</span>
                        <p class="text-sm text-gray-500">(ìƒìŠ¹ ì¶”ì„¸ ì „í™˜ ì‹ í˜¸)</p>
                    </div>
                    <div class="flow-box flow-decision">
                        <span class="font-bold">2b. QQQ ê°€ê²© < 200ì¼ ì´ë™í‰ê· ì„ ì¸ê°€?</span>
                        <p class="text-sm text-gray-500">(í•˜ë½ ì¶”ì„¸ ì „í™˜ ì‹ í˜¸)</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-4 gap-2 mt-4">
                    <div class="text-center font-bold text-gray-500">ì•„ë‹ˆì˜¤</div>
                    <div class="text-center font-bold text-green-600">ì˜ˆ</div>
                    <div class="text-center font-bold text-gray-500">ì•„ë‹ˆì˜¤</div>
                    <div class="text-center font-bold text-red-600">ì˜ˆ</div>
                </div>

                <div class="grid grid-cols-4 gap-2">
                    <div><div class="flow-arrow">â†“</div></div>
                    <div><div class="flow-arrow">â†“</div></div>
                    <div><div class="flow-arrow">â†“</div></div>
                    <div><div class="flow-arrow">â†“</div></div>
                </div>

                <div class="grid grid-cols-4 gap-2">
                    <div class="flow-box flow-action h-full">
                        <span class="font-bold">í˜„ê¸ˆ ë³´ìœ </span>
                        <p class="text-sm text-gray-500">ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ</p>
                    </div>
                    <div class="flow-box flow-action h-full bg-green-50 border-green-500">
                        <span class="font-bold text-green-800">'ìœ„í—˜ ì„ í˜¸' ì§„ì…</span>
                        <p class="text-sm text-gray-500">ìì‚°ì˜ 75%ë¥¼ TQQQì— íˆ¬ì</p>
                    </div>
                    <div class="flow-box flow-action h-full">
                        <span class="font-bold">í¬ì§€ì…˜ ìœ ì§€</span>
                        <p class="text-sm text-gray-500">ë¦¬ë°¸ëŸ°ì‹± ì ê²€ìœ¼ë¡œ ì´ë™</p>
                    </div>
                    <div class="flow-box flow-action h-full bg-red-50 border-red-500">
                        <span class="font-bold text-red-800">'ìœ„í—˜ íšŒí”¼' ì´íƒˆ</span>
                        <p class="text-sm text-gray-500">ëª¨ë“  TQQQë¥¼ ë§¤ë„í•˜ì—¬ 100% í˜„ê¸ˆí™”</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="rebalancing" class="mb-16 bg-white rounded-lg shadow-md p-6 md:p-8">
            <h2 class="text-3xl font-bold text-center text-[#004AAD] mb-4">ë¦¬ë°¸ëŸ°ì‹± í•˜ìœ„ ì‹œìŠ¤í…œ</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-10">
                'ìœ„í—˜ ì„ í˜¸' ìƒíƒœì—ì„œ í¬ì§€ì…˜ì„ ìœ ì§€í•  ë•Œ, ì´ í•˜ìœ„ ì‹œìŠ¤í…œì´ í™œì„±í™”ë©ë‹ˆë‹¤. TQQQì˜ ê°€ê²© ë³€ë™ìœ¼ë¡œ ì¸í•´ ì´ˆê¸° ëª©í‘œ ë¹„ì¤‘(75%)ì—ì„œ ë²—ì–´ë‚˜ëŠ” 'í¬íŠ¸í´ë¦¬ì˜¤ ë“œë¦¬í”„íŠ¸' í˜„ìƒì„ ë°©ì§€í•˜ê³ , ìœ„í—˜ ìˆ˜ì¤€ì„ ì¼ì •í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ëª©ì ì…ë‹ˆë‹¤.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <h3 class="text-xl font-bold text-center text-[#0065D2] mb-4">ë¦¬ë°¸ëŸ°ì‹± íŠ¸ë¦¬ê±° ìœ í˜•</h3>
                    <div class="space-y-4">
                        <div class="p-4 rounded-lg border-2 border-slate-200">
                            <h4 class="font-bold">ğŸ•’ ì‹œê°„ ê¸°ì¤€ (Time-based)</h4>
                            <p class="text-sm text-gray-600">ìì‚° ë¹„ì¤‘ê³¼ ìƒê´€ì—†ì´, ì •í•´ì§„ ì‹œì (ì›”ë§, ë¶„ê¸°ë§, ì—°ë§)ì— ë„ë‹¬í•˜ë©´ ë¬´ì¡°ê±´ ëª©í‘œ ë¹„ì¤‘ìœ¼ë¡œ ì¬ì¡°ì •í•©ë‹ˆë‹¤.</p>
                        </div>
                        <div class="p-4 rounded-lg border-2 border-slate-200">
                            <h4 class="font-bold">ğŸ“Š ì ˆëŒ€ì  í—ˆìš© ë²”ìœ„ (Absolute Band)</h4>
                            <p class="text-sm text-gray-600">TQQQ ë¹„ì¤‘ì´ ëª©í‘œì¹˜(75%)ì—ì„œ ê³ ì •ëœ ê°’(ì˜ˆ: Â±5%)ì„ ë²—ì–´ë‚˜ë©´ ì¬ì¡°ì •í•©ë‹ˆë‹¤. (ì˜ˆ: 70% ë¯¸ë§Œ ë˜ëŠ” 80% ì´ˆê³¼)</p>
                        </div>
                        <div class="p-4 rounded-lg border-2 border-slate-200">
                            <h4 class="font-bold">â— ìƒëŒ€ì  í—ˆìš© ë²”ìœ„ (Relative Band)</h4>
                            <p class="text-sm text-gray-600">TQQQ ë¹„ì¤‘ì´ ëª©í‘œì¹˜(75%)ì—ì„œ ë¹„ë¡€ ê°’(ì˜ˆ: Â±10%)ì„ ë²—ì–´ë‚˜ë©´ ì¬ì¡°ì •í•©ë‹ˆë‹¤. (ì˜ˆ: 67.5% ë¯¸ë§Œ ë˜ëŠ” 82.5% ì´ˆê³¼)</p>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-center text-[#0065D2] mb-4">ëª©í‘œ ìì‚° ë°°ë¶„</h3>
                    <div class="chart-container">
                        <canvas id="allocationDonutChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="comparison" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#004AAD] mb-8">í—ˆìš© ë²”ìœ„ ë°©ì‹ ë¹„êµ ë¶„ì„</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-10">
                ë™ì¼í•œ íŒŒë¼ë¯¸í„° ê°’(10%)ì„ ì‚¬ìš©í•˜ë”ë¼ë„, 'ì ˆëŒ€ì ' ë°©ì‹ê³¼ 'ìƒëŒ€ì ' ë°©ì‹ì€ ë¦¬ë°¸ëŸ°ì‹±ì´ ì‹¤í–‰ë˜ëŠ” í—ˆìš© ë²”ìœ„ì— ì°¨ì´ë¥¼ ë§Œë“­ë‹ˆë‹¤. ìƒëŒ€ì  ë°©ì‹ì´ ë” ì¢ì€ ë²”ìœ„ë¥¼ ê°€ì ¸ ë” ì¦ì€ ê±°ë˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
            <div class="bg-white rounded-lg shadow-md p-6 md:p-8">
                <div class="chart-container h-96 md:h-[450px]">
                    <canvas id="bandComparisonChart"></canvas>
                </div>
            </div>
        </section>

    </div>

    <footer class="text-center p-6 bg-[#004AAD] text-white">
        <p>ì´ ì¸í¬ê·¸ë˜í”½ì€ ì œê³µëœ Python ì½”ë“œì˜ ë…¼ë¦¬ì  íë¦„ì„ ì‹œê°ì ìœ¼ë¡œ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const brilliantBlues = ['#0065D2', '#87CEFA', '#369EFF', '#004AAD'];

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                }
                return label;
            };

            const wrapLabel = (label, maxWidth) => {
                if (label.length <= maxWidth) {
                    return label;
                }
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + word).length > maxWidth) {
                        lines.push(currentLine.trim());
                        currentLine = '';
                    }
                    currentLine += word + ' ';
                });
                lines.push(currentLine.trim());
                return lines;
            };

            if (document.getElementById('allocationDonutChart')) {
                new Chart(document.getElementById('allocationDonutChart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['TQQQ (íˆ¬ì ìì‚°)', 'í˜„ê¸ˆ (ì•ˆì „ ìì‚°)'],
                        datasets: [{
                            label: 'ìì‚° ë°°ë¶„',
                            data: [75, 25],
                            backgroundColor: [brilliantBlues[0], brilliantBlues[1]],
                            borderColor: '#ffffff',
                            borderWidth: 4,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    font: { size: 14 }
                                }
                            },
                            title: {
                                display: true,
                                text: "'ìœ„í—˜ ì„ í˜¸' ìƒíƒœì˜ ëª©í‘œ í¬íŠ¸í´ë¦¬ì˜¤",
                                font: { size: 16 }
                            },
                            tooltip: {
                                callbacks: {
                                    title: tooltipTitleCallback
                                }
                            }
                        },
                        cutout: '60%',
                    }
                });
            }

            if (document.getElementById('bandComparisonChart')) {
                const targetWeight = 0.75;
                const param = 0.10;

                const absoluteLower = targetWeight - param;
                const absoluteUpper = targetWeight + param;

                const relativeLower = targetWeight * (1 - param);
                const relativeUpper = targetWeight * (1 + param);
                
                new Chart(document.getElementById('bandComparisonChart'), {
                    type: 'bar',
                    data: {
                        labels: ['ì ˆëŒ€ì  í—ˆìš© ë²”ìœ„ (Absolute)', 'ìƒëŒ€ì  í—ˆìš© ë²”ìœ„ (Relative)'],
                        datasets: [{
                            label: 'í•˜ë‹¨ ê²½ê³„',
                            data: [absoluteLower * 100, relativeLower * 100],
                            backgroundColor: brilliantBlues[1],
                            borderColor: brilliantBlues[0],
                            borderWidth: 2,
                            barPercentage: 0.6,
                        }, {
                            label: 'ìƒë‹¨ ê²½ê³„',
                            data: [absoluteUpper * 100, relativeUpper * 100],
                            backgroundColor: brilliantBlues[0],
                            borderColor: brilliantBlues[3],
                            borderWidth: 2,
                            barPercentage: 0.6,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: {
                            x: {
                                beginAtZero: false,
                                title: {
                                    display: true,
                                    text: 'TQQQ ë¹„ì¤‘ (%)',
                                    font: { size: 14 }
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value + '%'
                                    }
                                }
                            },
                            y: {
                                ticks: {
                                    font: { size: 14 }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'ë¦¬ë°¸ëŸ°ì‹± íŠ¸ë¦¬ê±° ë²”ìœ„ ë¹„êµ (íŒŒë¼ë¯¸í„° = 10%)',
                                font: { size: 16 }
                            },
                            tooltip: {
                                callbacks: {
                                    title: tooltipTitleCallback,
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.x !== null) {
                                            label += context.parsed.x.toFixed(2) + '%';
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>
